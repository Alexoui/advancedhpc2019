 \documentclass{article} \usepackage[utf8]{inputenc} \title{Report.1.investigate} 
\author{alexandre caro } \date{October 2019} \begin{document} \maketitle \begin{verbatim}
    So i changed the labwork1_OpenMP()
    
    void Labwork::labwork1_OpenMP() {
    int pixelCount = inputImage->width * inputImage->height;
    outputImage = static_cast<char *>(malloc(pixelCount * 3));
#pragma omp parallel for
    for (int j = 0; j < 100; j++) { // let's do it 100 times, otherwise it's too fast!
        for (int i = 0; i < pixelCount; i++) {
            outputImage[i * 3] = (char) (((int) inputImage->buffer[i * 3] + (int) 
inputImage->buffer[i * 3 + 1] +
                                          (int) inputImage->buffer[i * 3 + 2]) / 3);
            outputImage[i * 3 + 1] = outputImage[i * 3];
            outputImage[i * 3 + 2] = outputImage[i * 3];
        }                                                                                                                   }
                                                            }
                                                            
Then when i build with ./labwork 1 ../data/eiffel.jpg i get
       Starting labwork 1 labwork 1 CPU ellapsed 5836.6ms labwork 1 ellapsed 499.5ms instead of 
before i changed the function
       Starting labwork 1 labwork 1 CPU ellapsed 5847.8ms labwork 1 ellapsed 85.1ms So we have an 
improvement in time. \end{verbatim} \end{document}
